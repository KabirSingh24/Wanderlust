<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head  th:replace="~{fragments/header :: head('Edit WanderLust')}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div th:replace="~{fragments/header :: navbar}"></div>
<div class="container mt-3">
    <!-- Success Message -->
    <div th:if="${success}" class="alert alert-success" role="alert">
        <i class="fa-solid fa-check-circle"></i> <span th:text="${success}"></span>
    </div>
    <!-- Failure Message -->
    <div th:if="${failure}" class="alert alert-danger" role="alert">
        <i class="fa-solid fa-xmark"></i> <span th:text="${failure}"></span>
    </div>
</div>


<main class="container my-4">
<div class="row mt-3">
    <div class="col-8 offset-2">
        <form th:action="@{/listings/{id}/edit/update(id=${editedListing.id})}" th:object="${editedListing}" method="post" novalidate class="needs-validation" enctype="multipart/form-data">
            <input type="hidden" th:field="*{id}" required/> <!-- Keep ID hidden -->
    <div class="mb-3">
        <label for="title" class="form-label">Title:</label>
        <input type="text" th:field="*{title}" class="form-control" />
        <div class="valid-feedback">Please Enter a Valid Title</div><br/>
    </div>
    <div class="mb-3">
        Orignal Listing Image<br>
        <img th:if="${originalImgUrl!=null}" th:src="${originalImgUrl}" alt="Listing Image" class="img-thumbnail" />
    </div>
    <div class="mb-3">
        <label for="imageFile">Listing Image</label>
        <input type="file" name="imageFile" class="form-control" accept="image/*">
    </div>
    <div class="mb-3">
    <label for="description" class="form-label">Description:</label>
    <textarea th:field="*{description}" class="form-control" ></textarea>
        <div class="invalid-feedback">Please Enter an short Description</div><br/>
    </div>
            <div class="row">
    <div class="mb-3 col-md-4">
    <label for="price" class="form-label">Price per Night:</label>
    <input  step="0.01" th:field="*{price}" class="form-control" required/>
        <div class="invalid-feedback">Please Enter a Valid Price</div><br/>
    </div>
    <div class="mb-3 col-md-8">
    <label for="location" class="form-label">Location:</label>
    <input type="text" th:field="*{location}" class="form-control" required/>
        <div class="invalid-feedback">Please Enter a Valid Location</div><br/>
    </div>
            </div>
    <div class="mb-3">
    <label for="country" class="form-label">Country:</label>
    <input type="text" th:field="*{country}" class="form-control"required/>
        <div class="invalid-feedback">Country Required</div>
    </div>
    <button type="submit" class="btn btn-primary edit-btn mt-3">Edit</button>
            </br>
</form>
</div>
</div>
</main>
<div th:replace="~{fragments/footer :: footer}"></div>
<script th:src="@{/js/script.js}"></script>
<!--<script th:src="@{/js/script.js}"></script>-->
</body>
</html>

